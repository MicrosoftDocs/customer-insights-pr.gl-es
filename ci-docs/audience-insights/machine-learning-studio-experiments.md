---
title: Experimentos de Machine Learning Studio (clásico)
description: Use modelos de Machine Learning Studio (clásico) en Dynamics 365 Customer Insights.
ms.date: 12/03/2020
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: tutorial
author: m-hartmann
ms.author: ameetj
ms.reviewer: mhart
manager: shellyha
ms.openlocfilehash: 71881f7e1f9448fe0a7d6d92b8102b8b42de7c2a
ms.sourcegitcommit: bae40184312ab27b95c140a044875c2daea37951
ms.translationtype: HT
ms.contentlocale: gl-ES
ms.lasthandoff: 03/15/2021
ms.locfileid: "5598337"
---
# <a name="use-models-based-on-azure-machine-learning-studio-classic"></a><span data-ttu-id="86348-103">Usar modelos baseados en Azure Machine Learning Studio (clásico)</span><span class="sxs-lookup"><span data-stu-id="86348-103">Use models based on Azure Machine Learning Studio (classic)</span></span>

<span data-ttu-id="86348-104">Os datos unificados en Dynamics 365 Customer Insights son unha fonte para construír modelos de aprendizaxe automática que poden xerar información comercial adicional.</span><span class="sxs-lookup"><span data-stu-id="86348-104">The unified data in Dynamics 365 Customer Insights is a source for building machine learning models that can generate additional business insights.</span></span> <span data-ttu-id="86348-105">Customer Insights intégrase con Machine Learning Studio (clásico) para usar os seus propios modelos personalizados.</span><span class="sxs-lookup"><span data-stu-id="86348-105">Customer Insights integrates with Machine Learning Studio (classic) to use your own custom models.</span></span> <span data-ttu-id="86348-106">Para ver como os modelos desenvolvidos en Azure Machine Learning se integran con Customer Insights, consulte [Experimentos de Azure Machine Learning](azure-machine-learning-experiments.md).</span><span class="sxs-lookup"><span data-stu-id="86348-106">To see how models developed in Azure Machine Learning are integrated with Customer Insights, see [Azure Machine Learning experiments](azure-machine-learning-experiments.md).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="86348-107">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="86348-107">Prerequisites</span></span>

- <span data-ttu-id="86348-108">Acceder a Customer Insights</span><span class="sxs-lookup"><span data-stu-id="86348-108">Access to Customer Insights</span></span>
- <span data-ttu-id="86348-109">Activar unha subscrición de Azure Enterprise</span><span class="sxs-lookup"><span data-stu-id="86348-109">Active Azure Enterprise subscription</span></span>
- [<span data-ttu-id="86348-110">Perfís de cliente unificados</span><span class="sxs-lookup"><span data-stu-id="86348-110">Unified customer profiles</span></span>](data-unification.md)
- <span data-ttu-id="86348-111">Configuración de [exportación de entidades a Azure Blob Storage](export-azure-blob-storage.md)</span><span class="sxs-lookup"><span data-stu-id="86348-111">[Entity export to Azure Blob storage](export-azure-blob-storage.md) set up</span></span>

## <a name="set-up-machine-learning-studio-classic"></a><span data-ttu-id="86348-112">Configurar Machine Learning Studio clásico</span><span class="sxs-lookup"><span data-stu-id="86348-112">Set up Machine Learning Studio Classic</span></span>

<span data-ttu-id="86348-113">Nun primeiro paso, necesitamos crear un espazo de traballo para Machine Learning Studio (clásico) e abrilo.</span><span class="sxs-lookup"><span data-stu-id="86348-113">In a first step, we need to create a workspace for and open the Machine Learning Studio (classic).</span></span>

1. <span data-ttu-id="86348-114">Vaia a[https://www.portal.azure.com](https://www.portal.azure.com/) e inicie sesión.</span><span class="sxs-lookup"><span data-stu-id="86348-114">Go to [https://www.portal.azure.com](https://www.portal.azure.com/) and sign in.</span></span>

1. <span data-ttu-id="86348-115">Seleccione **Crear un recurso**.</span><span class="sxs-lookup"><span data-stu-id="86348-115">Select **Create a resource**.</span></span>

1. <span data-ttu-id="86348-116">Busque o **Espazo de traballo de Machine Learning Studio** e seleccione **Crear**.</span><span class="sxs-lookup"><span data-stu-id="86348-116">Search **Machine Learning Studio Workspace** and select **Create**.</span></span>

1. <span data-ttu-id="86348-117">Insira os detalles necesarios para [crear o espazo de traballo](/azure/machine-learning/studio/create-workspace).</span><span class="sxs-lookup"><span data-stu-id="86348-117">Enter the required details to [create the workspace](/azure/machine-learning/studio/create-workspace).</span></span> <span data-ttu-id="86348-118">Escolla o **Nivel de prezos do plan de servizos web** en función da cantidade de datos que pretende importar.</span><span class="sxs-lookup"><span data-stu-id="86348-118">Choose the **Web service plan pricing tier** based on the amount of data you plan to import.</span></span> <span data-ttu-id="86348-119">Para ter o mellor rendemento, seleccione a **Localización** que está xeograficamente máis preto de vostede.</span><span class="sxs-lookup"><span data-stu-id="86348-119">For best performance, select the **Location** that is geographically closest to you.</span></span>

1. <span data-ttu-id="86348-120">Despois de crear o recurso, aparecerá o panel o espazo de traballo de Machine Learning Studio.</span><span class="sxs-lookup"><span data-stu-id="86348-120">After creating the resource, the Machine Learning Studio workspace dashboard will appear.</span></span> <span data-ttu-id="86348-121">Seleccione **Lanzar Machine Learning Studio**.</span><span class="sxs-lookup"><span data-stu-id="86348-121">Select **Launch Machine Learning Studio**.</span></span>

   ![Interfaz de usuario de Azure Machine Learning Studio](media/azure-machine-learning-studio.png)

## <a name="work-with-azure-machine-learning-studio"></a><span data-ttu-id="86348-123">Traballar con Azure Machine Learning Studio</span><span class="sxs-lookup"><span data-stu-id="86348-123">Work with Azure Machine Learning Studio</span></span>

<span data-ttu-id="86348-124">Agora pode crear un novo experimento ou importar un modelo de experimento existente dende a galería de mostras.</span><span class="sxs-lookup"><span data-stu-id="86348-124">You can now create a new experiment, or import an existing experiment template from the sample gallery.</span></span> <span data-ttu-id="86348-125">Hai experimentos de mostra para tres escenarios estándar:</span><span class="sxs-lookup"><span data-stu-id="86348-125">There are sample experiments for three standard scenarios:</span></span>

- [<span data-ttu-id="86348-126">Predición de abandono</span><span class="sxs-lookup"><span data-stu-id="86348-126">Churn prediction</span></span>](#churn-analysis)

- [<span data-ttu-id="86348-127">Valor de duración do cliente</span><span class="sxs-lookup"><span data-stu-id="86348-127">Customer lifetime value</span></span>](#customer-lifetime-value-prediction)

- [<span data-ttu-id="86348-128">Recomendación de produtos ou seguinte mellor acción</span><span class="sxs-lookup"><span data-stu-id="86348-128">Product recommendation or next best action</span></span>](#productrecommendation-or-next-best-action)

1. <span data-ttu-id="86348-129">Se crea un novo experimento ou usa un modelo de experimento da galería, necesitará configurar as propiedades de **Importar datos**.</span><span class="sxs-lookup"><span data-stu-id="86348-129">If you create a new experiment or use an experiment template from the gallery, you need to configure the **Import Data** properties.</span></span> <span data-ttu-id="86348-130">Use a experiencia guiada ou proporcione directamente detalles para acceder ao Azure Blob Storage que contén os seus datos.</span><span class="sxs-lookup"><span data-stu-id="86348-130">Use the guided experience or directly provide details to access the Azure Blob Storage that contains your data.</span></span>  

   ![Experimento de Azure Machine Learning Studio](media/azure-machine-learning-studio-experiment.png)

1. <span data-ttu-id="86348-132">Agora pode construír unha canle de procesamento personalizada para limpar e preprocesar os datos, extraer funcións e adestrar un modelo adecuado.</span><span class="sxs-lookup"><span data-stu-id="86348-132">Now you can build a custom processing pipeline to clean and preprocess the data, extract features, and train a suitable model.</span></span>

1. <span data-ttu-id="86348-133">Probe e optimice o rendemento do modelo.</span><span class="sxs-lookup"><span data-stu-id="86348-133">Test and optimize the model performance.</span></span>

1. <span data-ttu-id="86348-134">Cando estea satisfeito coa calidade dun modelo, seleccione **Configurar o servizo web** > **Servizo web preditivo**.</span><span class="sxs-lookup"><span data-stu-id="86348-134">When you’re satisfied with the quality of a model, select **Set up web service** > **Predictive Web Service**.</span></span> <span data-ttu-id="86348-135">Esta opción importa o modelo adestrado e a canle de caracterización do experimento de adestramento a un servizo de predición.</span><span class="sxs-lookup"><span data-stu-id="86348-135">This option imports the trained model and the featurization pipeline from the training experiment to a predictive service.</span></span> <span data-ttu-id="86348-136">O servizo de predición pode tomar outro conxunto de datos de entrada co esquema empregado no experimento de adestramento para facer predicións.</span><span class="sxs-lookup"><span data-stu-id="86348-136">The predictive service can take another set of input data with the schema used in the training experiment to make predictions.</span></span>

   ![Configurar un servizo web preditivo](media/predictive-webservice-control.png)

1. <span data-ttu-id="86348-138">Unha vez que o experimento de servizo web preditivo ten éxito, pode implementalo para a programación automática.</span><span class="sxs-lookup"><span data-stu-id="86348-138">Once the predictive web service experiment is successful, you can deploy it for auto scheduling.</span></span> <span data-ttu-id="86348-139">Para que o servizo web funcione con Customer Insights, seleccione **Implementar o servizo web** > **Implementar vista previa do [novo] servizo web**.</span><span class="sxs-lookup"><span data-stu-id="86348-139">To have the web service work with Customer Insights, select **Deploy Web Service** > **Deploy Web Service [New] Preview**.</span></span> <span data-ttu-id="86348-140">[Máis información acerca do despregamento dun servizo web](/azure/machine-learning/studio/deploy-a-machine-learning-web-service).</span><span class="sxs-lookup"><span data-stu-id="86348-140">[Learn more about deploying a web service](/azure/machine-learning/studio/deploy-a-machine-learning-web-service).</span></span>

   ![Despregar un servizo web preditivo](media/predictive-webservice-deploy.png)

## <a name="sample-models-from-the-gallery"></a><span data-ttu-id="86348-142">Modelos de mostra da galería</span><span class="sxs-lookup"><span data-stu-id="86348-142">Sample models from the gallery</span></span>

<span data-ttu-id="86348-143">Empregaremos un escenario ficticio de Contoso Hotel para os modelos deste artigo.</span><span class="sxs-lookup"><span data-stu-id="86348-143">We'll use a fictitious scenario of Contoso Hotel for the models in this article.</span></span> <span data-ttu-id="86348-144">Contoso Hotel recolle os seguintes datos:</span><span class="sxs-lookup"><span data-stu-id="86348-144">Contoso Hotel gathers the following data:</span></span>

- <span data-ttu-id="86348-145">Datos de CRM consistentes na actividade de estadías no hotel.</span><span class="sxs-lookup"><span data-stu-id="86348-145">CRM data consisting of hotel stay activity.</span></span> <span data-ttu-id="86348-146">O conxunto de datos inclúe información sobre as datas de estadía de cada cliente rexistrado.</span><span class="sxs-lookup"><span data-stu-id="86348-146">The data set includes information about the dates of stay for each registered customer.</span></span> <span data-ttu-id="86348-147">Tamén contén información sobre a reserva, tipos de cuarto, detalles do gasto etc.</span><span class="sxs-lookup"><span data-stu-id="86348-147">It also contains information about the booking, room types, details of spend, and so on.</span></span> <span data-ttu-id="86348-148">Os datos abarcan catro anos, desde xaneiro de 2014 a xaneiro de 2018.</span><span class="sxs-lookup"><span data-stu-id="86348-148">The data spans four years, from January 2014 to January 2018.</span></span>
- <span data-ttu-id="86348-149">Perfís de cliente dos hóspedes.</span><span class="sxs-lookup"><span data-stu-id="86348-149">Customer profiles of hotel guests.</span></span> <span data-ttu-id="86348-150">Estes perfís conteñen información sobre cada cliente, incluído o seu nome, data de nacemento, enderezo postal, xénero e número de teléfono.</span><span class="sxs-lookup"><span data-stu-id="86348-150">These profiles contain information about each customer, including their name, birthdate, postal address, gender, and phone number.</span></span>
- <span data-ttu-id="86348-151">Uso de servizos ofrecidos polo hotel, como o balneario, lavandería, wifi ou mensaxería.</span><span class="sxs-lookup"><span data-stu-id="86348-151">Usage of services offered by the hotel, such as the spa, laundry, WiFi, or courier.</span></span> <span data-ttu-id="86348-152">Esta información rexístrase para cada cliente rexistrado.</span><span class="sxs-lookup"><span data-stu-id="86348-152">This information is logged for each registered customer.</span></span> <span data-ttu-id="86348-153">Normalmente, o uso de servizos está ligado á estadía.</span><span class="sxs-lookup"><span data-stu-id="86348-153">Typically, use of services is linked with the stay.</span></span> <span data-ttu-id="86348-154">Nalgúns casos, os servizos poden ser empregados polos clientes sen aloxarse no hotel.</span><span class="sxs-lookup"><span data-stu-id="86348-154">In some cases, services can be used by customers without staying in the hotel.</span></span>

## <a name="churn-analysis"></a><span data-ttu-id="86348-155">Análise de abandono</span><span class="sxs-lookup"><span data-stu-id="86348-155">Churn Analysis</span></span>

<span data-ttu-id="86348-156">A análise de abandono aplícase a diferentes áreas comerciais.</span><span class="sxs-lookup"><span data-stu-id="86348-156">Churn analysis applies to different business areas.</span></span> <span data-ttu-id="86348-157">Neste exemplo, imos analizar o abandono de servizos, especialmente no contexto dos servizos hoteleiros como se describe máis arriba.</span><span class="sxs-lookup"><span data-stu-id="86348-157">In this example, we’re going to look at service churn, specifically in the context of hotel services as described above.</span></span> <span data-ttu-id="86348-158">Ofrece un exemplo funcional dun modelo de canalización de extremo a extremo que se pode empregar como punto de partida para calquera outro tipo de modelo de abandono.</span><span class="sxs-lookup"><span data-stu-id="86348-158">It provides a working example of an end–to–end model pipeline that can be used as a starting point for any other type of churn model.</span></span>

### <a name="definition-of-churn"></a><span data-ttu-id="86348-159">Definición de abandono</span><span class="sxs-lookup"><span data-stu-id="86348-159">Definition of Churn</span></span>

<span data-ttu-id="86348-160">A definición de abandono pode variar en función do escenario.</span><span class="sxs-lookup"><span data-stu-id="86348-160">The definition of churn can differ based on the scenario.</span></span> <span data-ttu-id="86348-161">Neste exemplo, un hóspede que non visitou o hotel o ano pasado debe ser etiquetado como perdido.</span><span class="sxs-lookup"><span data-stu-id="86348-161">In this example, a guest who hasn’t visited the hotel in the past year should be labeled as churned.</span></span>  

<span data-ttu-id="86348-162">O modelo de experimento pódese importar da galería.</span><span class="sxs-lookup"><span data-stu-id="86348-162">The experiment template can be imported from the gallery.</span></span> <span data-ttu-id="86348-163">En primeiro lugar, asegúrese de importar os datos de **Actividade de estadía no hotel**, **Datos do cliente** e **Datos de uso do servizo** de Azure Blob Storage.</span><span class="sxs-lookup"><span data-stu-id="86348-163">First, ensure that you import the data for **Hotel Stay Activity**, **Customer data**, and **Service Usage Data** from Azure Blob storage.</span></span>

   ![Importar datos para o modelo de abandono](media/import-data-azure-blob-storage.png)

### <a name="featurization"></a><span data-ttu-id="86348-165">Caracterización</span><span class="sxs-lookup"><span data-stu-id="86348-165">Featurization</span></span>

<span data-ttu-id="86348-166">A partir da definición de abandono, primeiro identificamos as características en bruto que influirán na etiqueta.</span><span class="sxs-lookup"><span data-stu-id="86348-166">Based on the definition of churn, we first identify the raw features that will influence the label.</span></span> <span data-ttu-id="86348-167">A continuación, procesamos estas características en bruto en características numéricas que se poden usar con modelos de aprendizaxe automática.</span><span class="sxs-lookup"><span data-stu-id="86348-167">Then, we process these raw features into numerical features that can be used with machine learning models.</span></span> <span data-ttu-id="86348-168">A integración de datos ocorre en Customer Insights para que poidamos unir estas táboas usando o *ID de cliente*.</span><span class="sxs-lookup"><span data-stu-id="86348-168">Data integration happens in Customer Insights so we can join these tables by using the *Customer ID*.</span></span>

   ![Únir datos importados](media/join-imported-data.png)

<span data-ttu-id="86348-170">A caracterización da construción do modelo para a análise do abandono pode ser un pouco complicada.</span><span class="sxs-lookup"><span data-stu-id="86348-170">The featurization for building the model for churn analysis can be a little tricky.</span></span> <span data-ttu-id="86348-171">Os datos son unha función de tempo coa nova actividade hoteleira rexistrada a diario.</span><span class="sxs-lookup"><span data-stu-id="86348-171">The data is a function of time with new hotel activity recorded on daily basis.</span></span> <span data-ttu-id="86348-172">Durante a caracterización queremos xerar características estáticas a partir dos datos dinámicos.</span><span class="sxs-lookup"><span data-stu-id="86348-172">During featurization, we want to generate static features from the dynamic data.</span></span> <span data-ttu-id="86348-173">Neste caso, xeramos múltiples funcións da actividade hoteleira cunha xanela deslizante dun ano.</span><span class="sxs-lookup"><span data-stu-id="86348-173">In this case, we generate multiple features from hotel activity with a sliding window of one year.</span></span> <span data-ttu-id="86348-174">Tamén ampliamos as características categóricas como o tipo de cuarto ou o tipo de reserva a funcións separadas mediante a codificación one-hot.</span><span class="sxs-lookup"><span data-stu-id="86348-174">We also expand the categorical features like room type or booking type into separate features using one-hot encoding.</span></span>  

<span data-ttu-id="86348-175">Lista final de características:</span><span class="sxs-lookup"><span data-stu-id="86348-175">Final list of features:</span></span>

| <span data-ttu-id="86348-176">**Número**</span><span class="sxs-lookup"><span data-stu-id="86348-176">**Number**</span></span>  | <span data-ttu-id="86348-177">**Original_Column**</span><span class="sxs-lookup"><span data-stu-id="86348-177">**Original_Column**</span></span>          | <span data-ttu-id="86348-178">**Características derivadas**</span><span class="sxs-lookup"><span data-stu-id="86348-178">**Derived Features**</span></span>                                                                                                                      |
|-------------|------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="86348-179">1</span><span class="sxs-lookup"><span data-stu-id="86348-179">1</span></span>           | <span data-ttu-id="86348-180">Tipo de cuarto</span><span class="sxs-lookup"><span data-stu-id="86348-180">Room Type</span></span>                    | <span data-ttu-id="86348-181">RoomTypeLargeCount, RoomTypeSmallCount</span><span class="sxs-lookup"><span data-stu-id="86348-181">RoomTypeLargeCount, RoomTypeSmallCount</span></span>                                                                                                    |
| <span data-ttu-id="86348-182">2</span><span class="sxs-lookup"><span data-stu-id="86348-182">2</span></span>           | <span data-ttu-id="86348-183">Tipo de reserva</span><span class="sxs-lookup"><span data-stu-id="86348-183">Booking Type</span></span>                 | <span data-ttu-id="86348-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span><span class="sxs-lookup"><span data-stu-id="86348-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span></span>                                                                                         |
| <span data-ttu-id="86348-185">3</span><span class="sxs-lookup"><span data-stu-id="86348-185">3</span></span>           | <span data-ttu-id="86348-186">Categoría de viaxe</span><span class="sxs-lookup"><span data-stu-id="86348-186">Travel Category</span></span>              | <span data-ttu-id="86348-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span><span class="sxs-lookup"><span data-stu-id="86348-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span></span>                                                                                   |
| <span data-ttu-id="86348-188">4</span><span class="sxs-lookup"><span data-stu-id="86348-188">4</span></span>           | <span data-ttu-id="86348-189">Dólares gastados</span><span class="sxs-lookup"><span data-stu-id="86348-189">Dollars Spent</span></span>                | <span data-ttu-id="86348-190">TotalDollarSpent</span><span class="sxs-lookup"><span data-stu-id="86348-190">TotalDollarSpent</span></span>                                                                                                                          |
| <span data-ttu-id="86348-191">5</span><span class="sxs-lookup"><span data-stu-id="86348-191">5</span></span>           | <span data-ttu-id="86348-192">Datas de entrada e de saída</span><span class="sxs-lookup"><span data-stu-id="86348-192">Check-in and Checkout dates</span></span>  | <span data-ttu-id="86348-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span><span class="sxs-lookup"><span data-stu-id="86348-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span></span> <span data-ttu-id="86348-194">StayCount2015, StayCount2014</span><span class="sxs-lookup"><span data-stu-id="86348-194">StayCount2015, StayCount2014</span></span>                |
| <span data-ttu-id="86348-195">6</span><span class="sxs-lookup"><span data-stu-id="86348-195">6</span></span>           | <span data-ttu-id="86348-196">Uso dos servizos</span><span class="sxs-lookup"><span data-stu-id="86348-196">Service Usage</span></span>                | <span data-ttu-id="86348-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span><span class="sxs-lookup"><span data-stu-id="86348-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span></span>  |

### <a name="model-selection"></a><span data-ttu-id="86348-198">Selección do modelo</span><span class="sxs-lookup"><span data-stu-id="86348-198">Model selection</span></span>

<span data-ttu-id="86348-199">Agora necesitamos escoller o algoritmo óptimo para usar.</span><span class="sxs-lookup"><span data-stu-id="86348-199">Now we need to choose the optimal algorithm to use.</span></span> <span data-ttu-id="86348-200">Neste caso, a maioría das funcións están baseadas en características categóricas.</span><span class="sxs-lookup"><span data-stu-id="86348-200">In this case, most features are based on categorical features.</span></span> <span data-ttu-id="86348-201">Normalmente, os modelos baseados na árbore de decisión funcionan ben.</span><span class="sxs-lookup"><span data-stu-id="86348-201">Typically, decision tree–based models work well.</span></span> <span data-ttu-id="86348-202">Se só hai características numéricas, as redes neuronais poderían ser unha mellor opción.</span><span class="sxs-lookup"><span data-stu-id="86348-202">If there are only numerical features, neural networks could be a better choice.</span></span> <span data-ttu-id="86348-203">A máquina vectorial de soporte (SVM) tamén é un bo candidato en tales situacións; non obstante, necesita un pouco de axuste para extraer o mellor rendemento.</span><span class="sxs-lookup"><span data-stu-id="86348-203">Support vector machine (SVM) also is a good candidate in such situations; however, it needs quite a bit of tuning to extract the best performance.</span></span> <span data-ttu-id="86348-204">Eliximos a **Árbore de decisión impulsada de dúas clases** como primeiro modelo de elección seguido da **SVM de dúas clases** como segundo modelo.</span><span class="sxs-lookup"><span data-stu-id="86348-204">We choose **Two-Class Boosted Decision Tree** as the first model of choice followed by **Two-Class SVM** as the second model.</span></span> <span data-ttu-id="86348-205">Azure Machine Learning Studio permítelle facer probas A/B, polo que é beneficioso comezar con dous modelos en vez dun.</span><span class="sxs-lookup"><span data-stu-id="86348-205">Azure Machine Learning Studio lets you do A/B testing, so it’s beneficial to start with two models rather than one.</span></span>

<span data-ttu-id="86348-206">A seguinte imaxe mostra a canle de formación e avaliación do modelo de Azure Machine Learning Studio:</span><span class="sxs-lookup"><span data-stu-id="86348-206">The following image shows the model training and evaluation pipeline from Azure Machine Learning Studio:</span></span>

![Modelo de abandono en Azure Machine Learning Studio](media/azure-machine-learning-model.png)

<span data-ttu-id="86348-208">Tamén aplicamos unha técnica chamada **Importancia das características de permutación**, un aspecto importante da optimización de modelos.</span><span class="sxs-lookup"><span data-stu-id="86348-208">We also apply a technique called **Permutation Feature Importance**, an important aspect of model optimization.</span></span> <span data-ttu-id="86348-209">Os modelos incorporados teñen pouca ou ningunha información sobre o impacto de calquera característica específica na predición final.</span><span class="sxs-lookup"><span data-stu-id="86348-209">Built-in models have little to no insight into the impact of any specific feature on the final prediction.</span></span> <span data-ttu-id="86348-210">A calculadora de importancia das características usa un algoritmo personalizado para calcular a influencia das características individuais sobre o resultado dun modelo específico.</span><span class="sxs-lookup"><span data-stu-id="86348-210">The feature importance calculator uses a custom algorithm to compute the influence of individual features on the outcome for a specific model.</span></span> <span data-ttu-id="86348-211">A importancia da característica normalízase entre +1 e -1.</span><span class="sxs-lookup"><span data-stu-id="86348-211">The feature importance is normalized between +1 to -1.</span></span> <span data-ttu-id="86348-212">Unha influencia negativa significa que a función correspondente ten unha influencia contraintuitiva no resultado e debe ser eliminada do modelo.</span><span class="sxs-lookup"><span data-stu-id="86348-212">A negative influence means the corresponding feature has counter-intuitive influence on the outcome and should be removed from the model.</span></span> <span data-ttu-id="86348-213">Unha influencia positiva indica que a característica está a contribuír bastante cara a predición.</span><span class="sxs-lookup"><span data-stu-id="86348-213">A positive influence indicates the feature is contributing heavily towards the prediction.</span></span> <span data-ttu-id="86348-214">Estes valores non son coeficientes de correlación porque son diferentes métricas.</span><span class="sxs-lookup"><span data-stu-id="86348-214">These values aren't correlation coefficients as they are different metrics.</span></span> <span data-ttu-id="86348-215">Para obter máis información, consulte [Importancia das características de permutación](/azure/machine-learning/studio-module-reference/permutation-feature-importance).</span><span class="sxs-lookup"><span data-stu-id="86348-215">For more information, see [Permutation Feature Importance](/azure/machine-learning/studio-module-reference/permutation-feature-importance).</span></span>

<span data-ttu-id="86348-216">Todo o [experimento de abandono está dispoñible en Azure AI Gallery](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span><span class="sxs-lookup"><span data-stu-id="86348-216">The entire [churn experiment is available in the Azure AI Gallery](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span></span>

## <a name="customer-lifetime-value-prediction"></a><span data-ttu-id="86348-217">Predición do valor de duración do cliente</span><span class="sxs-lookup"><span data-stu-id="86348-217">Customer lifetime value prediction</span></span>

<span data-ttu-id="86348-218">O cálculo do valor de duración do cliente (CLTV) é unha das medidas clave que unha empresa pode utilizar para avaliar e segmentar os seus clientes.</span><span class="sxs-lookup"><span data-stu-id="86348-218">The customer lifetime value (CLTV) calculation is one of the key metrics that a business can use to assess and segment its customers.</span></span> <span data-ttu-id="86348-219">Para a hostalería, é fundamental coñecer os seus clientes.</span><span class="sxs-lookup"><span data-stu-id="86348-219">For the hotel business, it’s critical to know their customers.</span></span> <span data-ttu-id="86348-220">Por exemplo, comprender os factores que conforman os bos clientes é información crucial.</span><span class="sxs-lookup"><span data-stu-id="86348-220">For example, understanding factors that make up good customers is crucial information.</span></span> <span data-ttu-id="86348-221">Axuda á administración do hotel a valorar en que características deben centrarse e mellorar para satisfacer aos clientes que máis pagan.</span><span class="sxs-lookup"><span data-stu-id="86348-221">It helps the hotel management assess which features they need to focus on and improve to satisfy their high paying customers.</span></span> <span data-ttu-id="86348-222">Estas decisións poden ter un impacto directo sobre as vendas e as ganancias.</span><span class="sxs-lookup"><span data-stu-id="86348-222">These decisions can have a direct impact on sales and earnings.</span></span>  

### <a name="definition-of-cltv"></a><span data-ttu-id="86348-223">Definición de CLTV</span><span class="sxs-lookup"><span data-stu-id="86348-223">Definition of CLTV</span></span>

<span data-ttu-id="86348-224">Para este exemplo, definimos o CLTV dun cliente como o importe total en dólares que se espera que o cliente gaste nos próximos 365 días.</span><span class="sxs-lookup"><span data-stu-id="86348-224">For this example, we define the CLTV of a customer as the total dollar amount the customer is expected to spend in the next 365 days.</span></span> <span data-ttu-id="86348-225">Empregaremos os últimos tres anos de datos de todos os clientes para predecir este valor.</span><span class="sxs-lookup"><span data-stu-id="86348-225">We are going to use the past three years’ worth of data for all customers to predict this value.</span></span>

### <a name="featurization"></a><span data-ttu-id="86348-226">Caracterización</span><span class="sxs-lookup"><span data-stu-id="86348-226">Featurization</span></span>

<span data-ttu-id="86348-227">Neste caso, a caracterización parecerase bastante ao escenario de abandono.</span><span class="sxs-lookup"><span data-stu-id="86348-227">In this case, featurization is going to be quite like the churn scenario.</span></span> <span data-ttu-id="86348-228">Non obstante, as etiquetas e os valores previstos son diferentes do definido anteriormente.</span><span class="sxs-lookup"><span data-stu-id="86348-228">However, the labels and predicted values are different than defined above.</span></span>

### <a name="model-selection"></a><span data-ttu-id="86348-229">Selección do modelo</span><span class="sxs-lookup"><span data-stu-id="86348-229">Model selection</span></span>

<span data-ttu-id="86348-230">Predicir o CLTV é un problema de regresión xa que o valor previsto é unha variable continua positiva valorada.</span><span class="sxs-lookup"><span data-stu-id="86348-230">Predicting the CLTV is a regression problem as the predicted value is a positive valued continuous variable.</span></span> <span data-ttu-id="86348-231">En función das propiedades das características, seleccionamos a **Regresión da árbore de decisión reforzada** como algoritmo e a **Regresión da rede neuronal** como outro algoritmo para adestrar o modelo.</span><span class="sxs-lookup"><span data-stu-id="86348-231">Based on the feature properties, we select **Boosted Decision Tree Regression** as one algorithm and **Neural Network Regression** as another algorithm to train the model.</span></span>

## <a name="product-recommendation-or-next-best-action"></a><span data-ttu-id="86348-232">Recomendación de produtos ou seguinte mellor acción</span><span class="sxs-lookup"><span data-stu-id="86348-232">Product recommendation or Next Best Action</span></span>

<span data-ttu-id="86348-233">A recomendación de produtos nun escenario hoteleiro interprétase como a recomendación de servizos ofrecidos polo hotel aos clientes.</span><span class="sxs-lookup"><span data-stu-id="86348-233">Product recommendation in a hotel scenario is interpreted as recommending services offered by the hotel to the customers.</span></span> <span data-ttu-id="86348-234">O obxectivo é escoller os servizos axeitados para os clientes para que se maximice o seu uso.</span><span class="sxs-lookup"><span data-stu-id="86348-234">The objective is to choose the appropriate services for customers so that their usage is maximized.</span></span> <span data-ttu-id="86348-235">É semellante ás recomendacións de películas para usuarios de servizos de emisión de vídeo.</span><span class="sxs-lookup"><span data-stu-id="86348-235">It’s similar to movie recommendations for video streaming service users.</span></span>

### <a name="definition-of-product-recommendation-or-next-best-action"></a><span data-ttu-id="86348-236">Definición de recomendación de produtos ou seguinte mellor acción</span><span class="sxs-lookup"><span data-stu-id="86348-236">Definition of Product Recommendation or Next Best Action</span></span>

<span data-ttu-id="86348-237">Definimos o obxectivo como maximizar a cantidade en dólares do uso do servizo ofrecendo os mellores servizos correspondentes aos clientes do hotel segundo o seu interese.</span><span class="sxs-lookup"><span data-stu-id="86348-237">We define the goal as maximizing the dollar amount of service usage by offering the best matching services to hotel customers according to their interest.</span></span>

### <a name="featurization"></a><span data-ttu-id="86348-238">Caracterización</span><span class="sxs-lookup"><span data-stu-id="86348-238">Featurization</span></span>

<span data-ttu-id="86348-239">Do mesmo xeito que o modelo de abandono, unimos o ServiceCustomerID do hotel co CustomerID para poder construír recomendacións de xeito coherente por CustomerID.</span><span class="sxs-lookup"><span data-stu-id="86348-239">Like the churn model, we are joining the hotel ServiceCustomerID with CustomerID in order to build recommendations consistently per CustomerID.</span></span>

![Caracterización do modelo de recomendación](media/azure-machine-learning-model-featurization.png)

<span data-ttu-id="86348-241">Os datos proveñen de tres entidades diferentes e deles derivan as funcións.</span><span class="sxs-lookup"><span data-stu-id="86348-241">The data is sourced from three different entities and features are derived from them.</span></span> <span data-ttu-id="86348-242">A caracterización do problema da recomendación é diferente en comparación cos escenarios de abandono ou de CLTV.</span><span class="sxs-lookup"><span data-stu-id="86348-242">The featurization for the problem of recommendation is different compared to churn or CLTV scenarios.</span></span> <span data-ttu-id="86348-243">O modelo de recomendación necesita datos de entrada en forma de tres conxuntos de características.</span><span class="sxs-lookup"><span data-stu-id="86348-243">The recommendation model needs input data in the form of three sets of features.</span></span>

### <a name="model-selection"></a><span data-ttu-id="86348-244">Selección do modelo</span><span class="sxs-lookup"><span data-stu-id="86348-244">Model selection</span></span>

<span data-ttu-id="86348-245">Predecimos produtos ou servizos empregando o algoritmo chamado **Train Matchbox Recommender** para adestrar o modelo de recomendacións.</span><span class="sxs-lookup"><span data-stu-id="86348-245">We predict products or services by using the algorithm called **Train Matchbox Recommender** to train the recommendation model.</span></span>

![Algoritmo de recomendación de produtos](media/azure-machine-learning-model-recommendation-algorithm.png)

<span data-ttu-id="86348-247">Os tres portos de entrada do modelo **Train Matchbox Recommender** collen os datos de uso do servizo de adestramento, a descrición do cliente (opcional) e a descrición do servizo.</span><span class="sxs-lookup"><span data-stu-id="86348-247">The three input ports for the **Train Matchbox Recommender** model takes in the training service usage data, customer description (optional), and service description.</span></span> <span data-ttu-id="86348-248">Hai tres xeitos diferentes de puntuar o modelo.</span><span class="sxs-lookup"><span data-stu-id="86348-248">There are three different ways of scoring the model.</span></span> <span data-ttu-id="86348-249">Un é para a avaliación do modelo no que se calcula unha puntuación de ganancia acumulada normalizada con desconto (NDCG) para clasificar os elementos valorados.</span><span class="sxs-lookup"><span data-stu-id="86348-249">One is for model evaluation where a Normalized Discounted Cumulative Gain (NDCG) score is calculated to rank the rated items.</span></span> <span data-ttu-id="86348-250">Neste experimento, a puntuación de NDCG foi de 0,97.</span><span class="sxs-lookup"><span data-stu-id="86348-250">In this experiment, we have the NDCG score as 0.97.</span></span> <span data-ttu-id="86348-251">As outras dúas opcións son a puntuación do modelo en todo o catálogo de servizos recomendables ou a puntuación só en elementos que os usuarios non utilizaron antes.</span><span class="sxs-lookup"><span data-stu-id="86348-251">The other two options are scoring the model on the entire recommendable service catalog, or scoring only on items that users have not used before.</span></span>

<span data-ttu-id="86348-252">Mirando máis para a distribución das recomendacións en todo o catálogo de servizos, notamos que o teléfono, o wifi e a mensaxería son os servizos máis recomendados.</span><span class="sxs-lookup"><span data-stu-id="86348-252">Looking further on the distributions of the recommendations on the entire service catalog, we notice that phone, WiFi, and courier are the top services to be recommended.</span></span> <span data-ttu-id="86348-253">Isto é coherente co que atopamos a partir das distribucións dos datos de consumo de servizos:</span><span class="sxs-lookup"><span data-stu-id="86348-253">This is consistent with what we found from the distributions of the service consumption data:</span></span>

![Resultado do modelo de recomendación](media/azure-machine-learning-model-output.png)

<span data-ttu-id="86348-255">Todo o [experimento de recomendación de produtos pódese acceder en Azure AI Gallery.](https://gallery.azure.ai/Experiment/Recommendation-4)</span><span class="sxs-lookup"><span data-stu-id="86348-255">The entire [product recommendation experiment can be accessed in Azure AI Gallery.](https://gallery.azure.ai/Experiment/Recommendation-4)</span></span>

## <a name="integrate-custom-models"></a><span data-ttu-id="86348-256">Integrar modelos personalizados</span><span class="sxs-lookup"><span data-stu-id="86348-256">Integrate custom models</span></span>

<span data-ttu-id="86348-257">Para usar estas predicións en Customer Insights, cómpre **exportar** as predicións xunto cos ID de cliente.</span><span class="sxs-lookup"><span data-stu-id="86348-257">To use these predictions in Customer Insights, you need to **export** the predictions along with the customer IDs.</span></span> <span data-ttu-id="86348-258">[Expórteos á mesma localización de almacenamento de Azure Blob](/azure/storage/common/storage-import-export-data-from-blobs) á que exporta os datos de orixe.</span><span class="sxs-lookup"><span data-stu-id="86348-258">[Export them to the same Azure Blob storage location](/azure/storage/common/storage-import-export-data-from-blobs) that you export the source data to.</span></span> <span data-ttu-id="86348-259">O servizo web preditivo pode programarse para que funcione regularmente e actualice as puntuacións.</span><span class="sxs-lookup"><span data-stu-id="86348-259">The predictive web service can be scheduled to run regularly and update the scores.</span></span>

<span data-ttu-id="86348-260">Os datos xerados polo modelo personalizado pódense empregar para enriquecer aínda máis os seus datos dos clientes.</span><span class="sxs-lookup"><span data-stu-id="86348-260">Data generated by the custom model can be used to further enrich your customer data.</span></span> <span data-ttu-id="86348-261">Para obter máis información, consulte [Modelos de aprendizaxe automática personalizados](custom-models.md).</span><span class="sxs-lookup"><span data-stu-id="86348-261">For more information, see [Custom machine learning models](custom-models.md).</span></span>


[!INCLUDE[footer-include](../includes/footer-banner.md)]